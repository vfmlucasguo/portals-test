/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
import{b as n,c as o}from"./p-6ccd60f1.js";import{OVERLAY_BACK_BUTTON_PRIORITY as t}from"./p-6561b0e5.js";import{c as e,f as i,a,b as d,g as s}from"./p-47720e67.js";let r=0;const c=new WeakMap,l=n=>({create:o=>w(n,o),dismiss:(o,t,e)=>O(document,o,t,n,e),getTop:async()=>P(document,n)}),u=l("ion-alert"),p=l("ion-action-sheet"),v=l("ion-loading"),b=l("ion-modal"),f=l("ion-picker"),m=l("ion-popover"),h=l("ion-toast"),y=n=>{"undefined"!=typeof document&&j(document);const o=r++;n.overlayIndex=o,n.hasAttribute("id")||(n.id=`ion-overlay-${o}`)},w=(n,o)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(n).then((()=>{const t=document.createElement(n);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},o),{hasController:!0})),C(document).appendChild(t),new Promise((n=>e(t,n)))})):Promise.resolve(),x='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',k=(n,o)=>{let t=n.querySelector(x);const e=null==t?void 0:t.shadowRoot;e&&(t=e.querySelector(x)||t),t?i(t):o.focus()},g=(n,o)=>{const t=Array.from(n.querySelectorAll(x));let e=t.length>0?t[t.length-1]:null;const i=null==e?void 0:e.shadowRoot;i&&(e=i.querySelector(x)||e),e?e.focus():o.focus()},j=n=>{0===r&&(r=1,n.addEventListener("focus",(o=>{((n,o)=>{const t=P(o,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),e=n.target;t&&e&&(t.classList.contains("ion-disable-focus-trap")||(t.shadowRoot?(()=>{if(t.contains(e))t.lastFocus=e;else{const n=t.lastFocus;k(t,t),n===o.activeElement&&g(t,t),t.lastFocus=o.activeElement}})():(()=>{if(t===e)t.lastFocus=void 0;else{const n=s(t);if(!n.contains(e))return;const i=n.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(e))t.lastFocus=e;else{const n=t.lastFocus;k(i,t),n===o.activeElement&&g(i,t),t.lastFocus=o.activeElement}}})()))})(o,n)}),!0),n.addEventListener("ionBackButton",(o=>{const e=P(n);(null==e?void 0:e.backdropDismiss)&&o.detail.register(t,(()=>e.dismiss(void 0,W)))})),n.addEventListener("keyup",(o=>{if("Escape"===o.key){const o=P(n);(null==o?void 0:o.backdropDismiss)&&o.dismiss(void 0,W)}})))},O=(n,o,t,e,i)=>{const a=P(n,e,i);return a?a.dismiss(o,t):Promise.reject("overlay does not exist")},P=(n,o,t)=>{const e=((n,o)=>(void 0===o&&(o="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(o)).filter((n=>n.overlayIndex>0))))(n,o).filter((n=>!n.classList.contains("overlay-hidden")));return void 0===t?e[e.length-1]:e.find((n=>n.id===t))},A=(n=!1)=>{const o=C(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");o&&(n?o.setAttribute("aria-hidden","true"):o.removeAttribute("aria-hidden"))},B=async(t,e,i,a,d)=>{var s,r;if(t.presented)return;A(!0),t.presented=!0,t.willPresent.emit(),null===(s=t.willPresentShorthand)||void 0===s||s.emit();const c=n(t),l=t.enterAnimation?t.enterAnimation:o.get(e,"ios"===c?i:a);await E(t,l,t.el,d)&&(t.didPresent.emit(),null===(r=t.didPresentShorthand)||void 0===r||r.emit()),"ION-TOAST"!==t.el.tagName&&T(t.el),!t.keyboardClose||null!==document.activeElement&&t.el.contains(document.activeElement)||t.el.focus()},T=async n=>{let o=document.activeElement;if(!o)return;const t=null==o?void 0:o.shadowRoot;t&&(o=t.querySelector(x)||o),await n.onDidDismiss(),o.focus()},z=async(t,e,i,a,d,s,r)=>{var l,u;if(!t.presented)return!1;A(!1),t.presented=!1;try{t.el.style.setProperty("pointer-events","none"),t.willDismiss.emit({data:e,role:i}),null===(l=t.willDismissShorthand)||void 0===l||l.emit({data:e,role:i});const p=n(t),v=t.leaveAnimation?t.leaveAnimation:o.get(a,"ios"===p?d:s);"gesture"!==i&&await E(t,v,t.el,r),t.didDismiss.emit({data:e,role:i}),null===(u=t.didDismissShorthand)||void 0===u||u.emit({data:e,role:i}),c.delete(t),t.el.classList.add("overlay-hidden"),t.el.style.removeProperty("pointer-events")}catch(n){console.error(n)}return t.el.remove(),!0},C=n=>n.querySelector("ion-app")||n.body,E=async(n,t,e,i)=>{e.classList.remove("overlay-hidden");const a=t(n.el,i);n.animated&&o.getBoolean("animated",!0)||a.duration(0),n.keyboardClose&&a.beforeAddWrite((()=>{const n=e.ownerDocument.activeElement;(null==n?void 0:n.matches("input,ion-input, ion-textarea"))&&n.blur()}));const d=c.get(n)||[];return c.set(n,[...d,a]),await a.play(),!0},G=(n,o)=>{let t;const e=new Promise((n=>t=n));return I(n,o,(n=>{t(n.detail)})),e},I=(n,o,t)=>{const e=i=>{d(n,o,e),t(i)};a(n,o,e)},M=n=>"cancel"===n||n===W,N=n=>n(),S=(n,t)=>{if("function"==typeof n)return o.get("_zoneGate",N)((()=>{try{return n(t)}catch(n){throw n}}))},W="backdrop";export{W as B,u as a,p as b,m as c,B as d,y as e,z as f,G as g,c as h,M as i,k as j,P as k,v as l,b as m,f as p,S as s,h as t}